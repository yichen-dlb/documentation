"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([["93703"],{72261:function(e,t,n){n.r(t),n.d(t,{default:()=>h,frontMatter:()=>i,metadata:()=>a,assets:()=>c,toc:()=>d,contentTitle:()=>s});var a=JSON.parse('{"id":"playback/web/metadata","title":"Metadata","description":"The messages added to your stream using the Backend Metadata guide, you can access","source":"@site/theolive/playback/web/04-metadata.mdx","sourceDirName":"playback/web","slug":"/playback/web/metadata","permalink":"/documentation/pr-preview/pr-305/theolive/playback/web/metadata","draft":false,"unlisted":false,"editUrl":"https://github.com/THEOplayer/documentation/blob/-/theolive/playback/web/04-metadata.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"theolive","previous":{"title":"Airplay","permalink":"/documentation/pr-preview/pr-305/theolive/playback/web/airplay"},"next":{"title":"Basic Playback Guide","permalink":"/documentation/pr-preview/pr-305/theolive/playback/web/basic-playback-guide"}}'),r=n("85893"),o=n("50065");let i={},s="Metadata",c={},d=[];function l(e){let t={a:"a",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"metadata",children:"Metadata"})}),"\n",(0,r.jsxs)(t.p,{children:["The messages added to your stream using the ",(0,r.jsx)(t.a,{href:"/documentation/pr-preview/pr-305/theolive/contribution/sei-messages",children:"Backend Metadata guide"}),", you can access\nas a metadata text track."]}),"\n",(0,r.jsxs)(t.p,{children:["First listen to the event to see if a new metadata track has been added, and add an ",(0,r.jsx)(t.code,{children:"onTimeCode"})," listener:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"player.textTracks.addEventListener('addTrack', (event) => {\n  const track = event.track;\n  if (track.id === 'timecode') {\n    track.mode = 'showing'; // Setting the mode to showing will enable the entercue events\n    track.addEventListener('entercue', this.onTimeCode);\n  }\n});\n"})}),"\n",(0,r.jsx)(t.p,{children:"The actual onTimeCode listener could look like this:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"const onTimeCode = (event) => {\n  const timeCode = event.cue.content;\n  // Insert other code here\n};\n"})}),"\n",(0,r.jsx)(t.p,{children:"Where the timecode has the following type:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"export interface TimeCode {\n  readonly hours: number;\n  readonly minutes: number;\n  readonly seconds: number;\n  readonly frames: number;\n}\n"})}),"\n",(0,r.jsx)(t.p,{children:"So a full example could be as follows:"}),"\n",(0,r.jsxs)(t.p,{children:["You distribute sports matches and want to display an overlay on the player when the score changes. Every time a score change happens, you add a picture timing SEI message to the stream and store in your backend that this time corresponds with this score. (You could also just add the timing message to all frames if this is easier, but this requires more processing both server and player side). This information can then be retrieved by the application running on the device of a viewer. You then add the event listener and listen for the ",(0,r.jsx)(t.code,{children:"entercue"})," events. In the listener you check whether the ",(0,r.jsx)(t.code,{children:"TimeCode"})," corresponds with a score change event you recorded earlier and if so, display an overlay over the player."]})]})}function h(e={}){let{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},50065:function(e,t,n){n.d(t,{Z:function(){return s},a:function(){return i}});var a=n(67294);let r={},o=a.createContext(r);function i(e){let t=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);